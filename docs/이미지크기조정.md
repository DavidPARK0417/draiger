# ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • ê¸°ëŠ¥ì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì— êµ¬í˜„í•˜ê¸° ìœ„í•œ ìƒì„¸ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [ê¸°ëŠ¥ ê°œìš”](#ê¸°ëŠ¥-ê°œìš”)
2. [í•„ìš”í•œ íŒ¨í‚¤ì§€](#í•„ìš”í•œ-íŒ¨í‚¤ì§€)
3. [íŒŒì¼ êµ¬ì¡°](#íŒŒì¼-êµ¬ì¡°)
4. [ë°±ì—”ë“œ API êµ¬í˜„](#ë°±ì—”ë“œ-api-êµ¬í˜„)
5. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„](#í”„ë¡ íŠ¸ì—”ë“œ-êµ¬í˜„)
6. [ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª…](#ì£¼ìš”-ê¸°ëŠ¥-ì„¤ëª…)
7. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)

---

## ê¸°ëŠ¥ ê°œìš”

ì´ ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤:

- âœ… **ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ**: ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ í•œ ë²ˆì— ì—…ë¡œë“œ ê°€ëŠ¥
- âœ… **ë“œë˜ê·¸ ì•¤ ë“œë¡­**: íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œ ê°€ëŠ¥
- âœ… **í”½ì…€ë³„ í¬ê¸° ì¡°ì •**: ë„ˆë¹„/ë†’ì´ë¥¼ í”½ì…€ ë‹¨ìœ„ë¡œ ì§€ì •
- âœ… **í¼ì„¼íŠ¸ë³„ í¬ê¸° ì¡°ì •**: ì›ë³¸ ëŒ€ë¹„ ë¹„ìœ¨ë¡œ í¬ê¸° ì¡°ì •
- âœ… **í¬ê¸° í”„ë¦¬ì…‹**: ì¼ë°˜ì ì¸ í•´ìƒë„(Full HD, HD, 4K ë“±) ë¹ ë¥¸ ì„ íƒ
- âœ… **ë¹„ìœ¨ ìœ ì§€ ì˜µì…˜**: ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ ìœ ì§€ ì—¬ë¶€ ì„ íƒ
- âœ… **í™•ëŒ€ ë°©ì§€ ì˜µì…˜**: ì›ë³¸ë³´ë‹¤ ì‘ì„ ë•Œë§Œ í¬ê¸° ì¡°ì •
- âœ… **ì¼ê´„ ì²˜ë¦¬**: ëª¨ë“  ì´ë¯¸ì§€ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬
- âœ… **ê°œë³„/ì¼ê´„ ë‹¤ìš´ë¡œë“œ**: ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ ê°œë³„ ë˜ëŠ” ZIPìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ

---

## í•„ìš”í•œ íŒ¨í‚¤ì§€

### í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# ì´ë¯¸ì§€ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
pnpm add sharp

# ZIP íŒŒì¼ ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬
pnpm add jszip

# ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
pnpm add lucide-react

# íƒ€ì… ì •ì˜ (ê°œë°œ ì˜ì¡´ì„±)
pnpm add -D @types/jszip
```

### Shadcn UI ì»´í¬ë„ŒíŠ¸ (ì„ íƒì‚¬í•­)

ì´ í”„ë¡œì íŠ¸ëŠ” Shadcn UIë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ë‹¤ë¥¸ UI ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ëŒ€ì²´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸:

- `Button`
- `Card` (CardContent, CardDescription, CardHeader, CardTitle)
- `Input`
- `Select` (SelectContent, SelectItem, SelectTrigger, SelectValue)

---

## íŒŒì¼ êµ¬ì¡°

```
í”„ë¡œì íŠ¸ ë£¨íŠ¸/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ resize/
â”‚   â”‚       â””â”€â”€ route.ts          # ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸
â”‚   â””â”€â”€ resize/
â”‚       â””â”€â”€ page.tsx              # í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€
â””â”€â”€ components/
    â””â”€â”€ ui/                       # UI ì»´í¬ë„ŒíŠ¸ (Shadcn UI)
        â”œâ”€â”€ button.tsx
        â”œâ”€â”€ card.tsx
        â”œâ”€â”€ input.tsx
        â””â”€â”€ select.tsx
```

---

## ë°±ì—”ë“œ API êµ¬í˜„

### íŒŒì¼: `app/api/resize/route.ts`

ì´ íŒŒì¼ì€ Next.js API Routeë¡œ, ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.

#### ì£¼ìš” ê¸°ëŠ¥

1. **ì´ë¯¸ì§€ íŒŒì¼ ìˆ˜ì‹ **: FormDataë¡œ ì´ë¯¸ì§€ íŒŒì¼ì„ ë°›ìŠµë‹ˆë‹¤
2. **ë©”íƒ€ë°ì´í„° ì¶”ì¶œ**: ì›ë³¸ ì´ë¯¸ì§€ì˜ í¬ê¸° ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤
3. **í¬ê¸° ê³„ì‚°**: ëª¨ë“œ(í”½ì…€/í¼ì„¼íŠ¸)ì™€ ì˜µì…˜ì— ë”°ë¼ ëª©í‘œ í¬ê¸°ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤
4. **ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ**: Sharp ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë¦¬ì‚¬ì´ì¦ˆí•©ë‹ˆë‹¤
5. **ì‘ë‹µ ë°˜í™˜**: ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ ë°”ì´ë„ˆë¦¬ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤

#### êµ¬í˜„ ì½”ë“œ

```typescript
import { NextRequest, NextResponse } from "next/server";
import sharp from "sharp";

export async function POST(request: NextRequest) {
  try {
    console.log("ğŸ–¼ï¸ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ API] ìš”ì²­ ìˆ˜ì‹ ");

    const formData = await request.formData();
    const imageFile = formData.get("image") as File | null;

    if (!imageFile) {
      console.error("âŒ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ API] ì´ë¯¸ì§€ íŒŒì¼ ì—†ìŒ");
      return NextResponse.json(
        { error: "ì´ë¯¸ì§€ íŒŒì¼ì´ í•„ìš”í•©ë‹ˆë‹¤." },
        { status: 400 }
      );
    }

    const mode = formData.get("mode") as string;
    const option = formData.get("option") as string;
    const maintainAspectRatio = formData.get("maintainAspectRatio") === "true";
    const dontEnlarge = formData.get("dontEnlarge") === "true";

    // ì´ë¯¸ì§€ ë²„í¼ë¡œ ë³€í™˜
    const arrayBuffer = await imageFile.arrayBuffer();
    const buffer = Buffer.from(arrayBuffer);

    // ì›ë³¸ ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    const metadata = await sharp(buffer).metadata();
    const originalWidth = metadata.width || 0;
    const originalHeight = metadata.height || 0;

    console.log("ğŸ“ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ API] ì›ë³¸ í¬ê¸°", {
      width: originalWidth,
      height: originalHeight,
    });

    let targetWidth: number | null = null;
    let targetHeight: number | null = null;

    // ë¦¬ì‚¬ì´ì¦ˆ ì˜µì…˜ì— ë”°ë¼ í¬ê¸° ê³„ì‚°
    if (mode === "pixel") {
      const widthInput = formData.get("width") as string;
      const heightInput = formData.get("height") as string;

      const requestedWidth = widthInput ? parseInt(widthInput, 10) : 0;
      const requestedHeight = heightInput ? parseInt(heightInput, 10) : 0;

      if (option === "max") {
        // ìµœëŒ€ í¬ê¸°ë¡œ ì¡°ì • (ë¹„ìœ¨ ìœ ì§€)
        if (requestedWidth > 0 && requestedHeight > 0) {
          // ë‘˜ ë‹¤ ì§€ì •ëœ ê²½ìš°, ë” ì‘ì€ ë¹„ìœ¨ë¡œ ì¡°ì •
          const widthRatio = requestedWidth / originalWidth;
          const heightRatio = requestedHeight / originalHeight;
          const ratio = Math.min(widthRatio, heightRatio);

          if (dontEnlarge && ratio > 1) {
            // í™•ëŒ€í•˜ì§€ ì•ŠìŒ ì˜µì…˜ì´ ìˆê³  í™•ëŒ€ê°€ í•„ìš”í•œ ê²½ìš°
            targetWidth = originalWidth;
            targetHeight = originalHeight;
          } else {
            targetWidth = Math.round(originalWidth * ratio);
            targetHeight = Math.round(originalHeight * ratio);
          }
        } else if (requestedWidth > 0) {
          // ë„ˆë¹„ë§Œ ì§€ì •
          if (dontEnlarge && requestedWidth > originalWidth) {
            targetWidth = originalWidth;
            targetHeight = originalHeight;
          } else {
            targetWidth = requestedWidth;
            targetHeight = maintainAspectRatio
              ? Math.round((originalHeight * requestedWidth) / originalWidth)
              : originalHeight;
          }
        } else if (requestedHeight > 0) {
          // ë†’ì´ë§Œ ì§€ì •
          if (dontEnlarge && requestedHeight > originalHeight) {
            targetWidth = originalWidth;
            targetHeight = originalHeight;
          } else {
            targetHeight = requestedHeight;
            targetWidth = maintainAspectRatio
              ? Math.round((originalWidth * requestedHeight) / originalHeight)
              : originalWidth;
          }
        } else {
          return NextResponse.json(
            { error: "ë„ˆë¹„ ë˜ëŠ” ë†’ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." },
            { status: 400 }
          );
        }
      } else {
        // ì •í™•í•œ í¬ê¸°
        targetWidth = requestedWidth > 0 ? requestedWidth : originalWidth;
        targetHeight = requestedHeight > 0 ? requestedHeight : originalHeight;

        if (maintainAspectRatio) {
          // ë¹„ìœ¨ ìœ ì§€í•˜ë©´ì„œ ìµœëŒ€í•œ ë§ì¶¤
          const widthRatio = targetWidth / originalWidth;
          const heightRatio = targetHeight / originalHeight;
          const ratio = Math.min(widthRatio, heightRatio);

          if (dontEnlarge && ratio > 1) {
            targetWidth = originalWidth;
            targetHeight = originalHeight;
          } else {
            targetWidth = Math.round(originalWidth * ratio);
            targetHeight = Math.round(originalHeight * ratio);
          }
        }
      }
    } else {
      // í¼ì„¼íŠ¸ ëª¨ë“œ
      const percentInput = formData.get("percent") as string;
      const percent = parseFloat(percentInput || "100");

      if (percent <= 0) {
        return NextResponse.json(
          { error: "ì˜¬ë°”ë¥¸ í¼ì„¼íŠ¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." },
          { status: 400 }
        );
      }

      const ratio = percent / 100;
      targetWidth = Math.round(originalWidth * ratio);
      targetHeight = Math.round(originalHeight * ratio);
    }

    if (!targetWidth || !targetHeight) {
      return NextResponse.json(
        { error: "í¬ê¸° ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤." },
        { status: 400 }
      );
    }

    console.log("ğŸ“ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ API] ëª©í‘œ í¬ê¸°", {
      width: targetWidth,
      height: targetHeight,
    });

    // ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ
    const resizedBuffer = await sharp(buffer)
      .resize(targetWidth, targetHeight, {
        fit: maintainAspectRatio ? "inside" : "fill",
        withoutEnlargement: dontEnlarge,
      })
      .toBuffer();

    console.log("âœ… [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ API] ì²˜ë¦¬ ì™„ë£Œ", {
      originalSize: buffer.length,
      resizedSize: resizedBuffer.length,
    });

    // ì´ë¯¸ì§€ í˜•ì‹ ìœ ì§€ (ì›ë³¸ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜)
    const format = metadata.format || "jpeg";
    const mimeType = format === "jpeg" ? "image/jpeg" : `image/${format}`;

    return new NextResponse(resizedBuffer, {
      status: 200,
      headers: {
        "Content-Type": mimeType,
        "Content-Disposition": `attachment; filename="resized_image.${format}"`,
      },
    });
  } catch (error) {
    console.error("âŒ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ API] ì˜¤ë¥˜:", error);
    return NextResponse.json(
      {
        error:
          error instanceof Error
            ? error.message
            : "ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
      },
      { status: 500 }
    );
  }
}
```

#### API ìš”ì²­ í˜•ì‹

**ìš”ì²­ ë©”ì„œë“œ**: `POST`

**ìš”ì²­ ë³¸ë¬¸**: `FormData`

**í•„ìˆ˜ í•„ë“œ**:

- `image`: ì´ë¯¸ì§€ íŒŒì¼ (File)
- `mode`: ë¦¬ì‚¬ì´ì¦ˆ ëª¨ë“œ (`"pixel"` ë˜ëŠ” `"percent"`)

**í”½ì…€ ëª¨ë“œ í•„ë“œ**:

- `option`: í¬ê¸° ì˜µì…˜ (`"max"` ë˜ëŠ” `"exact"`)
- `width`: ë„ˆë¹„ (í”½ì…€, ì„ íƒì‚¬í•­)
- `height`: ë†’ì´ (í”½ì…€, ì„ íƒì‚¬í•­)
- `maintainAspectRatio`: ë¹„ìœ¨ ìœ ì§€ ì—¬ë¶€ (`"true"` ë˜ëŠ” `"false"`)
- `dontEnlarge`: í™•ëŒ€ ë°©ì§€ ì—¬ë¶€ (`"true"` ë˜ëŠ” `"false"`)

**í¼ì„¼íŠ¸ ëª¨ë“œ í•„ë“œ**:

- `percent`: í¼ì„¼íŠ¸ ê°’ (ì˜ˆ: `"50"`, `"150"`)

**ì‘ë‹µ**:

- ì„±ê³µ: ì´ë¯¸ì§€ ë°”ì´ë„ˆë¦¬ ë°ì´í„° (Content-Type: image/jpeg, image/png ë“±)
- ì‹¤íŒ¨: JSON ì—ëŸ¬ ë©”ì‹œì§€

---

## í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„

### íŒŒì¼: `app/resize/page.tsx`

ì´ íŒŒì¼ì€ ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • í˜ì´ì§€ì˜ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

#### ì£¼ìš” ìƒíƒœ ê´€ë¦¬

```typescript
type ResizeMode = "pixel" | "percent";
type ResizeOption = "max" | "exact";

interface ImageFile {
  id: string;
  file: File;
  preview: string;
  processedUrl?: string;
  isProcessing: boolean;
  error?: string;
}
```

#### í¬ê¸° í”„ë¦¬ì…‹ ì •ì˜

```typescript
const SIZE_PRESETS = [
  { value: "custom", label: "ì§ì ‘ ì…ë ¥", width: "", height: "" },
  {
    value: "1920x1080",
    label: "1920x1080 (Full HD)",
    width: "1920",
    height: "1080",
  },
  { value: "1280x720", label: "1280x720 (HD)", width: "1280", height: "720" },
  {
    value: "1080x1080",
    label: "1080x1080 (ì •ì‚¬ê°í˜•)",
    width: "1080",
    height: "1080",
  },
  {
    value: "1080x1920",
    label: "1080x1920 (ì„¸ë¡œí˜•)",
    width: "1080",
    height: "1920",
  },
  {
    value: "720x1280",
    label: "720x1280 (ì„¸ë¡œí˜•)",
    width: "720",
    height: "1280",
  },
  { value: "854x480", label: "854x480 (SD)", width: "854", height: "480" },
  {
    value: "3840x2160",
    label: "3840x2160 (4K)",
    width: "3840",
    height: "2160",
  },
] as const;
```

#### í•µì‹¬ í•¨ìˆ˜ë“¤

##### 1. íŒŒì¼ ì„ íƒ ì²˜ë¦¬

```typescript
const handleFilesSelect = useCallback((files: FileList | File[]) => {
  const fileArray = Array.from(files);
  const imageFiles: ImageFile[] = [];

  fileArray.forEach((file) => {
    if (!file.type.startsWith("image/")) {
      console.warn(`âš ï¸ [ì´ë¯¸ì§€ ì—…ë¡œë“œ] ì´ë¯¸ì§€ê°€ ì•„ë‹Œ íŒŒì¼ ì œì™¸: ${file.name}`);
      return;
    }

    const id = `${Date.now()}-${Math.random()}`;
    const reader = new FileReader();

    reader.onload = (e) => {
      const preview = e.target?.result as string;
      setImageFiles((prev) => {
        const existing = prev.find((img) => img.id === id);
        if (existing) {
          return prev.map((img) => (img.id === id ? { ...img, preview } : img));
        }
        return [...prev, { id, file, preview, isProcessing: false }];
      });
    };

    reader.readAsDataURL(file);
    imageFiles.push({
      id,
      file,
      preview: "",
      isProcessing: false,
    });
  });

  if (imageFiles.length === 0 && fileArray.length > 0) {
    alert("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
  }
}, []);
```

##### 2. ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬

```typescript
const handleDragOver = useCallback((e: React.DragEvent) => {
  e.preventDefault();
  e.stopPropagation();
}, []);

const handleDrop = useCallback(
  (e: React.DragEvent) => {
    e.preventDefault();
    e.stopPropagation();

    const files = e.dataTransfer.files;
    if (files.length > 0) {
      handleFilesSelect(files);
    }
  },
  [handleFilesSelect]
);
```

##### 3. ë‹¨ì¼ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬

```typescript
const handleResizeSingle = useCallback(
  async (imageFile: ImageFile) => {
    // ì²˜ë¦¬ ìƒíƒœ ì—…ë°ì´íŠ¸
    setImageFiles((prev) =>
      prev.map((img) =>
        img.id === imageFile.id
          ? { ...img, isProcessing: true, error: undefined }
          : img
      )
    );

    try {
      const formData = new FormData();
      formData.append("image", imageFile.file);
      formData.append("mode", resizeMode);
      formData.append("option", resizeOption);
      formData.append("maintainAspectRatio", maintainAspectRatio.toString());

      if (resizeMode === "pixel") {
        if (!width && !height) {
          throw new Error("ë„ˆë¹„ ë˜ëŠ” ë†’ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }
        formData.append("width", width || "0");
        formData.append("height", height || "0");
        formData.append("dontEnlarge", dontEnlarge.toString());
      } else {
        if (!percent || parseFloat(percent) <= 0) {
          throw new Error("ì˜¬ë°”ë¥¸ í¼ì„¼íŠ¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }
        formData.append("percent", percent);
      }

      console.log("ğŸ–¼ï¸ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ] ìš”ì²­ ì‹œì‘", {
        id: imageFile.id,
        fileName: imageFile.file.name,
        mode: resizeMode,
      });

      const response = await fetch("/api/resize", {
        method: "POST",
        body: formData,
      });

      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error || "ì´ë¯¸ì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
      }

      const blob = await response.blob();
      const url = URL.createObjectURL(blob);

      // ì²˜ë¦¬ ì™„ë£Œ ìƒíƒœ ì—…ë°ì´íŠ¸
      setImageFiles((prev) =>
        prev.map((img) =>
          img.id === imageFile.id
            ? { ...img, processedUrl: url, isProcessing: false }
            : img
        )
      );

      console.log("âœ… [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ] ì™„ë£Œ", { id: imageFile.id });
    } catch (error) {
      console.error("âŒ [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ] ì˜¤ë¥˜:", error);
      setImageFiles((prev) =>
        prev.map((img) =>
          img.id === imageFile.id
            ? {
                ...img,
                isProcessing: false,
                error:
                  error instanceof Error ? error.message : "ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ",
              }
            : img
        )
      );
    }
  },
  [
    resizeMode,
    resizeOption,
    width,
    height,
    percent,
    maintainAspectRatio,
    dontEnlarge,
  ]
);
```

##### 4. ëª¨ë“  ì´ë¯¸ì§€ ì¼ê´„ ì²˜ë¦¬

```typescript
const handleResizeAll = useCallback(async () => {
  if (imageFiles.length === 0) {
    alert("ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.");
    return;
  }

  if (resizeMode === "pixel" && !width && !height) {
    alert("ë„ˆë¹„ ë˜ëŠ” ë†’ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  if (resizeMode === "percent" && (!percent || parseFloat(percent) <= 0)) {
    alert("ì˜¬ë°”ë¥¸ í¼ì„¼íŠ¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    return;
  }

  setIsProcessingAll(true);

  // ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬
  for (const imageFile of imageFiles) {
    await handleResizeSingle(imageFile);
  }

  setIsProcessingAll(false);
  console.log("âœ… [ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ] ëª¨ë“  ì´ë¯¸ì§€ ì²˜ë¦¬ ì™„ë£Œ");
}, [imageFiles, handleResizeSingle, resizeMode, width, height, percent]);
```

##### 5. ZIP ë‹¤ìš´ë¡œë“œ

```typescript
const handleDownloadAll = useCallback(async () => {
  const processedImages = imageFiles.filter((img) => img.processedUrl);

  if (processedImages.length === 0) {
    alert("ì²˜ë¦¬ëœ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");
    return;
  }

  try {
    // jszip ë¼ì´ë¸ŒëŸ¬ë¦¬ ë™ì  import
    const JSZip = (await import("jszip")).default;
    const zip = new JSZip();

    // ê° ì´ë¯¸ì§€ë¥¼ ZIPì— ì¶”ê°€
    for (const imageFile of processedImages) {
      if (!imageFile.processedUrl) continue;

      const response = await fetch(imageFile.processedUrl);
      const blob = await response.blob();
      const fileName = `resized_${imageFile.file.name}`;
      zip.file(fileName, blob);
    }

    // ZIP íŒŒì¼ ìƒì„± ë° ë‹¤ìš´ë¡œë“œ
    const zipBlob = await zip.generateAsync({ type: "blob" });
    const url = URL.createObjectURL(zipBlob);
    const link = document.createElement("a");
    link.href = url;
    link.download = `resized_images_${Date.now()}.zip`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);

    console.log("âœ… [ZIP ë‹¤ìš´ë¡œë“œ] ì™„ë£Œ", { count: processedImages.length });
  } catch (error) {
    console.error("âŒ [ZIP ë‹¤ìš´ë¡œë“œ] ì˜¤ë¥˜:", error);
    alert("ZIP ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
  }
}, [imageFiles]);
```

#### UI êµ¬ì¡°

í˜ì´ì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **í—¤ë”**: ì œëª©ê³¼ ì„¤ëª…
2. **ì—…ë¡œë“œ ì˜ì—­**: ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë˜ëŠ” íŒŒì¼ ì„ íƒ
3. **í¬ê¸° ì¡°ì ˆ ì˜µì…˜**: ëª¨ë“œ ì„ íƒ, í¬ê¸° ì…ë ¥, ì˜µì…˜ ì„¤ì •
4. **ì²˜ë¦¬ëœ ì´ë¯¸ì§€ ê²°ê³¼**: ë¯¸ë¦¬ë³´ê¸° ë° ë‹¤ìš´ë¡œë“œ

---

## ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª…

### 1. ë¦¬ì‚¬ì´ì¦ˆ ëª¨ë“œ

#### í”½ì…€ ëª¨ë“œ (`pixel`)

- **ìµœëŒ€ í¬ê¸° ì˜µì…˜ (`max`)**: ì§€ì •í•œ í¬ê¸° ì´í•˜ë¡œ ì¡°ì • (ë¹„ìœ¨ ìœ ì§€)
- **ì •í™•í•œ í¬ê¸° ì˜µì…˜ (`exact`)**: ì§€ì •í•œ í¬ê¸°ë¡œ ì¡°ì •

#### í¼ì„¼íŠ¸ ëª¨ë“œ (`percent`)

- ì›ë³¸ í¬ê¸° ëŒ€ë¹„ ë¹„ìœ¨ë¡œ ì¡°ì • (ì˜ˆ: 50% = ì ˆë°˜ í¬ê¸°, 200% = 2ë°° í¬ê¸°)

### 2. ì˜µì…˜

#### ê°€ë¡œ ì„¸ë¡œ ë¹„ìœ¨ ìœ ì§€ (`maintainAspectRatio`)

- ì²´í¬ ì‹œ: ì›ë³¸ ì´ë¯¸ì§€ì˜ ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ì„ ìœ ì§€í•˜ë©´ì„œ í¬ê¸° ì¡°ì •
- ì²´í¬ í•´ì œ ì‹œ: ì§€ì •í•œ í¬ê¸°ë¡œ ê°•ì œ ì¡°ì • (ì´ë¯¸ì§€ê°€ ëŠ˜ì–´ë‚˜ê±°ë‚˜ ì°Œê·¸ëŸ¬ì§ˆ ìˆ˜ ìˆìŒ)

#### ë” ì‘ì„ ê²½ìš° í™•ëŒ€ ì•ˆí•¨ (`dontEnlarge`)

- ì²´í¬ ì‹œ: ì›ë³¸ë³´ë‹¤ í° í¬ê¸°ë¡œ ì¡°ì •í•˜ì§€ ì•ŠìŒ
- ì²´í¬ í•´ì œ ì‹œ: ì›ë³¸ë³´ë‹¤ í¬ê²Œë„ ì¡°ì • ê°€ëŠ¥

### 3. í¬ê¸° í”„ë¦¬ì…‹

ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í•´ìƒë„ë¥¼ ë¹ ë¥´ê²Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- Full HD (1920x1080)
- HD (1280x720)
- ì •ì‚¬ê°í˜• (1080x1080)
- ì„¸ë¡œí˜• (1080x1920, 720x1280)
- SD (854x480)
- 4K (3840x2160)

### 4. ë‹¤ì¤‘ ì´ë¯¸ì§€ ì²˜ë¦¬

- ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ í•œ ë²ˆì— ì—…ë¡œë“œ ê°€ëŠ¥
- ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ë™ì¼í•œ ì„¤ì •ìœ¼ë¡œ ì¼ê´„ ì²˜ë¦¬
- ì²˜ë¦¬ëœ ì´ë¯¸ì§€ë¥¼ ZIP íŒŒì¼ë¡œ ì¼ê´„ ë‹¤ìš´ë¡œë“œ

---

## ì‚¬ìš© ë°©ë²•

### 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pnpm add sharp jszip lucide-react
pnpm add -D @types/jszip
```

### 2. íŒŒì¼ ë³µì‚¬

1. `app/api/resize/route.ts` íŒŒì¼ì„ í”„ë¡œì íŠ¸ì— ë³µì‚¬
2. `app/resize/page.tsx` íŒŒì¼ì„ í”„ë¡œì íŠ¸ì— ë³µì‚¬
3. í•„ìš”í•œ UI ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ `components/ui/` í´ë”ì— ë³µì‚¬

### 3. ë¼ìš°íŒ… ì„¤ì •

Next.js App Routerë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

- `app/resize/page.tsx`ê°€ ìë™ìœ¼ë¡œ `/resize` ê²½ë¡œë¡œ ë¼ìš°íŒ…ë©ë‹ˆë‹¤
- `app/api/resize/route.ts`ê°€ ìë™ìœ¼ë¡œ `/api/resize` ì—”ë“œí¬ì¸íŠ¸ë¡œ ë¼ìš°íŒ…ë©ë‹ˆë‹¤

### 4. UI ì»´í¬ë„ŒíŠ¸ í™•ì¸

Shadcn UIë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°:

- `Button`, `Card`, `Input`, `Select` ì»´í¬ë„ŒíŠ¸ë¥¼ í”„ë¡œì íŠ¸ì˜ UI ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ êµì²´
- ë˜ëŠ” Shadcn UIë¥¼ ì„¤ì¹˜: `npx shadcn@latest add button card input select`

### 5. ìŠ¤íƒ€ì¼ë§

ì´ í”„ë¡œì íŠ¸ëŠ” Tailwind CSSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë‹¤ë¥¸ CSS í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

- `className` ì†ì„±ì„ í”„ë¡œì íŠ¸ì˜ ìŠ¤íƒ€ì¼ ì‹œìŠ¤í…œì— ë§ê²Œ ìˆ˜ì •

---

## ì£¼ì˜ì‚¬í•­

### 1. Sharp ë¼ì´ë¸ŒëŸ¬ë¦¬

- SharpëŠ” ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì´ë¯€ë¡œ í”Œë«í¼ë³„ë¡œ ë¹Œë“œê°€ í•„ìš”í•©ë‹ˆë‹¤
- ë°°í¬ í™˜ê²½ì—ì„œ Sharpê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”

### 2. íŒŒì¼ í¬ê¸° ì œí•œ

- Next.js ê¸°ë³¸ íŒŒì¼ í¬ê¸° ì œí•œì€ 4MBì…ë‹ˆë‹¤
- ë” í° íŒŒì¼ì„ ì²˜ë¦¬í•˜ë ¤ë©´ `next.config.ts`ì—ì„œ ì„¤ì •ì„ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤:

```typescript
// next.config.ts
export default {
  api: {
    bodyParser: {
      sizeLimit: "10mb", // ì›í•˜ëŠ” í¬ê¸°ë¡œ ë³€ê²½
    },
  },
};
```

### 3. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰

- ì—¬ëŸ¬ ì´ë¯¸ì§€ë¥¼ ë™ì‹œì— ì²˜ë¦¬í•  ë•Œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ëŒ€ëŸ‰ì˜ ì´ë¯¸ì§€ë¥¼ ì²˜ë¦¬í•  ë•ŒëŠ” ìˆœì°¨ ì²˜ë¦¬(í˜„ì¬ êµ¬í˜„)ê°€ ê¶Œì¥ë©ë‹ˆë‹¤

### 4. ë¸Œë¼ìš°ì € í˜¸í™˜ì„±

- `FileReader`, `FormData`, `URL.createObjectURL` ë“±ì€ ìµœì‹  ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›ë©ë‹ˆë‹¤
- êµ¬í˜• ë¸Œë¼ìš°ì € ì§€ì›ì´ í•„ìš”í•œ ê²½ìš° í´ë¦¬í•„ì„ ì¶”ê°€í•˜ì„¸ìš”

---

## ì»¤ìŠ¤í„°ë§ˆì´ì§•

### í”„ë¦¬ì…‹ ì¶”ê°€/ìˆ˜ì •

`SIZE_PRESETS` ë°°ì—´ì„ ìˆ˜ì •í•˜ì—¬ ì›í•˜ëŠ” í•´ìƒë„ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```typescript
const SIZE_PRESETS = [
  // ê¸°ì¡´ í”„ë¦¬ì…‹...
  {
    value: "2560x1440",
    label: "2560x1440 (2K)",
    width: "2560",
    height: "1440",
  },
  // ìƒˆë¡œìš´ í”„ë¦¬ì…‹ ì¶”ê°€
] as const;
```

### í¼ì„¼íŠ¸ ì˜µì…˜ ì¶”ê°€/ìˆ˜ì •

í¼ì„¼íŠ¸ ëª¨ë“œì˜ ì„ íƒ ì˜µì…˜ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```typescript
<SelectContent>
  <SelectItem value="10">10% ì‘ê²Œ</SelectItem>
  <SelectItem value="25">25% ì‘ê²Œ</SelectItem>
  // ì›í•˜ëŠ” ì˜µì…˜ ì¶”ê°€
</SelectContent>
```

### ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•

Tailwind CSS í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•˜ì—¬ ë””ìì¸ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ë¬¸ì œ í•´ê²°

### Sharp ì„¤ì¹˜ ì˜¤ë¥˜

```bash
# Sharpë¥¼ ë‹¤ì‹œ ì„¤ì¹˜
pnpm remove sharp
pnpm add sharp
```

### ì´ë¯¸ì§€ê°€ ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ

1. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
2. ì„œë²„ ë¡œê·¸ í™•ì¸ (í„°ë¯¸ë„)
3. API ì—”ë“œí¬ì¸íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸

### ZIP ë‹¤ìš´ë¡œë“œê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

1. `jszip` íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
2. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

---

## ì¶”ê°€ ê¸°ëŠ¥ ì•„ì´ë””ì–´

ì´ ê¸°ëŠ¥ì„ í™•ì¥í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ì´ë¯¸ì§€ í¬ë§· ë³€í™˜ (JPEG â†’ PNG ë“±)
- ì´ë¯¸ì§€ ì••ì¶• í’ˆì§ˆ ì¡°ì •
- ì›Œí„°ë§ˆí¬ ì¶”ê°€
- ì´ë¯¸ì§€ ìë¥´ê¸° (Crop)
- í•„í„° ì ìš©
- ë°°ì¹˜ ì²˜ë¦¬ íˆìŠ¤í† ë¦¬ ì €ì¥

---

## ì°¸ê³  ìë£Œ

- [Sharp ê³µì‹ ë¬¸ì„œ](https://sharp.pixelplumbing.com/)
- [JSZip ê³µì‹ ë¬¸ì„œ](https://stuk.github.io/jszip/)
- [Next.js API Routes](https://nextjs.org/docs/app/building-your-application/routing/route-handlers)
- [FileReader API](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)

---

## ë¼ì´ì„ ìŠ¤

ì´ ì½”ë“œëŠ” í”„ë¡œì íŠ¸ì˜ ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

---

**ë¬¸ì„œ ì‘ì„±ì¼**: 2026ë…„
**ë²„ì „**: 1.0.0
