# 카카오 애드핏(AdFit) 통합 가이드

## 📋 개요

카카오 애드핏 심사 통과를 위한 필수 사항과 통합 방법을 안내합니다.

---

## ✅ 심사 통과 필수 사항

### 1. 소유권 확인

- ✅ **완료**: 푸터에 소유주 정보 추가
  - 소유주: 박용범
  - 이메일: decidepyb@gmail.com
  - 위치: `src/components/Footer.tsx`

### 2. SEO 최적화 (검색 엔진 노출)

- ✅ **완료**: 기본 SEO 설정
  - `sitemap.xml` 자동 생성 (`src/app/sitemap.ts`)
  - `robots.txt` 설정 (`src/app/robots.ts`)
  - 메타데이터 설정 (`src/app/layout.tsx`)
  - 구조화된 데이터 (JSON-LD) 추가

### 3. 트래픽 품질

- 정상적인 트래픽 확보 필요
- 검색 엔진 유입 증가 권장
- 자연스러운 사용자 유입 유지

---

## 🔧 카카오 애드핏 통합 방법

### 1. 애드핏 계정 설정

1. [카카오 애드핏](https://adfit.kakao.com/) 접속
2. 매체 등록 및 심사 신청
3. 심사 통과 후 광고 단위 ID 발급

### 2. 광고 단위 ID 발급

심사 통과 후 다음 정보를 받게 됩니다:

- **광고 단위 ID**: `DAN-gzhM4ZoHUUTxO6Kg` (현재 사용 중)
- **광고 형식**: 배너 (250x250)
- **광고 크기**: 250px × 250px

---

## 💻 코드 통합 방법

### 방법 1: 컴포넌트로 통합 (권장)

#### 1. 애드핏 컴포넌트

`src/components/AdFit.tsx` 파일에 이미 구현되어 있습니다.

**주요 기능:**
- ✅ AdFit Web SDK 가이드 준수
- ✅ NO-AD 콜백 함수 지원 (`onFail` prop)
- ✅ `charset="utf-8"` 속성 포함
- ✅ 로깅 기능 (개발 환경에서 디버깅 용이)
- ✅ 반응형 디자인 지원

**컴포넌트 Props:**
- `unitId` (필수): 카카오 애드핏 광고 단위 ID
- `width` (선택): 광고 너비 (기본값: 320)
- `height` (선택): 광고 높이 (기본값: 100)
- `className` (선택): 추가 CSS 클래스
- `onFail` (선택): NO-AD 콜백 함수 (광고 요청 실패 시 실행)

#### 2. 페이지에 광고 추가

**예시 1: 기본 사용 (메인 페이지)**

```typescript
import AdFit from "@/components/AdFit";

export default function Home() {
  return (
    <div>
      {/* 콘텐츠 */}

      {/* 광고 영역 */}
      <div className="my-8 flex justify-center">
        <AdFit
          unitId="DAN-gzhM4ZoHUUTxO6Kg"
          width={250}
          height={250}
          className="rounded-lg"
        />
      </div>

      {/* 콘텐츠 */}
    </div>
  );
}
```

**예시 2: NO-AD 콜백 함수 사용**

```typescript
import AdFit from "@/components/AdFit";

export default function Home() {
  const handleAdFail = (element: HTMLElement) => {
    console.log("광고 로드 실패", element);
    // 대체 콘텐츠 표시 또는 다른 광고 스크립트 로드
  };

  return (
    <div>
      <div className="my-8 flex justify-center">
        <AdFit
          unitId="DAN-gzhM4ZoHUUTxO6Kg"
          width={250}
          height={250}
          onFail={handleAdFail}
        />
      </div>
    </div>
  );
}
```

**예시 3: 반응형 광고 배치**

```typescript
import AdFit from "@/components/AdFit";

export default function Home() {
  return (
    <div>
      {/* 모바일: 250x250 */}
      <div className="flex justify-center sm:hidden">
        <AdFit
          unitId="DAN-gzhM4ZoHUUTxO6Kg"
          width={250}
          height={250}
        />
      </div>

      {/* 태블릿/데스크탑: 728x90 */}
      <div className="hidden sm:flex justify-center">
        <AdFit
          unitId="DAN-gzhM4ZoHUUTxO6Kg"
          width={728}
          height={90}
        />
      </div>
    </div>
  );
}
```

### 방법 2: 레이아웃에 직접 통합

`src/app/layout.tsx`에 직접 추가:

```typescript
<Script
  type="text/javascript"
  src="https://t1.daumcdn.net/kas/static/ba.min.js"
  async
  strategy="lazyOnload"
/>;

{
  /* 광고 영역 */
}
<ins
  className="kakao_ad_area"
  style={{ display: "none" }}
  data-ad-unit="YOUR_AD_UNIT_ID"
  data-ad-width="320"
  data-ad-height="100"
/>;
```

---

## 📍 권장 광고 배치 위치

### 1. 메인 페이지 (`src/app/page.tsx`)

- 카테고리 섹션 사이에 배치
- 콘텐츠와 자연스럽게 통합

### 2. 인사이트 상세 페이지 (`src/app/insight/[slug]/page.tsx`)

- 본문 상단 또는 하단
- 사이드바 (데스크탑)

### 3. 도구 페이지

- 계산 결과 하단
- 페이지 하단

### 4. 푸터 상단

- 모든 페이지 하단에 일관되게 배치

---

## 🎨 디자인 시스템 적용

### 광고 컨테이너 스타일

```typescript
<div
  className="
  my-8
  flex justify-center
  bg-gray-50 dark:bg-gray-800
  p-4
  rounded-lg
  border border-gray-100 dark:border-gray-700
  shadow-sm dark:shadow-gray-900/30
"
>
  <AdFit 
    unitId="DAN-gzhM4ZoHUUTxO6Kg" 
    width={250} 
    height={250} 
  />
</div>
```

### 반응형 광고

```typescript
// 모바일: 250x250
// 태블릿: 728x90
// 데스크탑: 970x250

{/* 모바일 전용 */}
<div className="flex justify-center sm:hidden">
  <AdFit 
    unitId="DAN-gzhM4ZoHUUTxO6Kg" 
    width={250} 
    height={250} 
  />
</div>

{/* 태블릿 전용 */}
<div className="hidden sm:flex lg:hidden justify-center">
  <AdFit 
    unitId="DAN-gzhM4ZoHUUTxO6Kg" 
    width={728} 
    height={90} 
  />
</div>

{/* 데스크탑 전용 */}
<div className="hidden lg:flex justify-center">
  <AdFit 
    unitId="DAN-gzhM4ZoHUUTxO6Kg" 
    width={970} 
    height={250} 
  />
</div>
```

---

## 🔍 SEO 최적화 확인 사항

### 1. Sitemap 확인

```bash
# 개발 서버 실행 후
curl http://localhost:3000/sitemap.xml
```

### 2. Robots.txt 확인

```bash
curl http://localhost:3000/robots.txt
```

### 3. 메타데이터 확인

- 브라우저 개발자 도구에서 `<head>` 태그 확인
- 구조화된 데이터 (JSON-LD) 확인

### 4. 검색 엔진 등록

- [Google Search Console](https://search.google.com/search-console) 등록
- [Naver Search Advisor](https://searchadvisor.naver.com/) 등록
- 사이트맵 제출

---

## 📊 트래픽 품질 개선 방법

### 1. 콘텐츠 최적화

- 정기적인 콘텐츠 업데이트
- SEO 친화적인 제목과 설명
- 관련 키워드 활용

### 2. 소셜 미디어 공유

- SNS를 통한 자연스러운 유입
- 콘텐츠 공유 기능 추가

### 3. 검색 엔진 최적화

- 메타 태그 최적화
- 구조화된 데이터 활용
- 내부 링크 구조 개선

---

## ⚠️ 주의사항

### 1. 광고 배치 규칙

- 콘텐츠를 가리지 않도록 주의
- 사용자 경험을 해치지 않는 위치에 배치
- 과도한 광고 배치 금지

### 2. 클릭 유도 금지

- 광고 클릭을 유도하는 문구 사용 금지
- 자동 클릭 방지
- 정상적인 트래픽 유지

### 3. 개인정보 보호

- 광고 스크립트는 개인정보를 수집하지 않도록 설정
- GDPR, 개인정보보호법 준수

---

## 🚀 배포 전 체크리스트

- [ ] 푸터에 소유주 정보 추가 확인
- [ ] SEO 메타데이터 설정 확인
- [ ] Sitemap.xml 생성 확인
- [ ] Robots.txt 설정 확인
- [ ] 구조화된 데이터 (JSON-LD) 확인
- [ ] 광고 단위 ID 발급 완료
- [ ] 광고 컴포넌트 통합 완료
- [ ] 반응형 디자인 적용 확인
- [ ] 다크모드 지원 확인
- [ ] 검색 엔진 등록 완료

---

## 📝 참고 자료

- [카카오 애드핏 공식 문서](https://adfit.kakao.com/)
- [카카오 애드핏 개발자 가이드](https://adfit.kakao.com/guide)
- [Next.js Script 컴포넌트](https://nextjs.org/docs/app/api-reference/components/script)

---

## 📝 NO-AD 콜백 함수 사용법

광고 요청이 실패하거나 노출할 광고가 없는 경우 대체 콘텐츠를 표시할 수 있습니다.

### 기본 사용법

```typescript
<AdFit
  unitId="DAN-gzhM4ZoHUUTxO6Kg"
  width={250}
  height={250}
  onFail={(element) => {
    // 광고 로드 실패 시 실행될 코드
    console.log("광고 로드 실패", element);
    
    // 대체 콘텐츠 표시 예시
    element.innerHTML = `
      <div style="width: 250px; height: 250px; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
        <p>광고를 불러올 수 없습니다</p>
      </div>
    `;
  }}
/>
```

### 외부 광고 스크립트 연동 (예: Google AdSense)

```typescript
<AdFit
  unitId="DAN-gzhM4ZoHUUTxO6Kg"
  width={250}
  height={250}
  onFail={(element) => {
    // AdFit 광고 실패 시 Google AdSense 로드
    const adSenseCode = `
      <ins class="adsbygoogle"
           style="display:inline-block;width:250px;height:250px"
           data-ad-client="ca-pub-XXXXX"
           data-ad-slot="XXXXX"></ins>
    `;
    element.innerHTML = adSenseCode;
    
    // Google AdSense 스크립트 로드
    if (typeof window !== 'undefined' && (window as any).adsbygoogle) {
      ((window as any).adsbygoogle = (window as any).adsbygoogle || []).push({});
    }
  }}
/>
```

---

## 🔄 업데이트 이력

- **2026-01-XX**: AdFit Web SDK 가이드 반영
  - NO-AD 콜백 함수 지원 추가
  - `charset="utf-8"` 속성 추가
  - 실제 광고 단위 ID 적용 (`DAN-gzhM4ZoHUUTxO6Kg`)
  - 로깅 기능 추가
  - 외부 광고 스크립트 연동 예시 추가
- **2026-01-XX**: 초기 문서 작성
  - 푸터 소유주 정보 추가
  - SEO 최적화 강화
  - 구조화된 데이터 추가

---

**작성자**: 박용범 (decidepyb@gmail.com)  
**최종 업데이트**: 2026-01-XX
