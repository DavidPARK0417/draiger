# 기술 스택 가이드

> 마케팅 도구 모음 프로젝트에서 사용할 추가 라이브러리 및 도구 가이드

## 현재 사용 중인 기술 스택

### 프론트엔드
- **Next.js 15** - React 프레임워크
- **TypeScript** - 타입 안정성
- **Tailwind CSS 4** - 스타일링
- **Recharts** - 데이터 시각화

### 백엔드/API
- **Next.js API Routes** - 서버 사이드 API
- **Google Gemini AI** - AI 기능
- **Nodemailer** - 이메일 전송

---

## 추가 예정 라이브러리

### 데이터 처리

#### papaparse
```bash
pnpm add papaparse
pnpm add -D @types/papaparse
```
- **용도**: CSV 파싱 및 생성
- **사용 예시**:
```typescript
import Papa from 'papaparse';

// CSV 생성
const csv = Papa.unparse(data);

// CSV 파싱
Papa.parse(csvString, {
  complete: (results) => {
    console.log(results.data);
  }
});
```

#### date-fns
```bash
pnpm add date-fns
```
- **용도**: 날짜 처리 및 포맷팅
- **사용 예시**:
```typescript
import { format, addDays } from 'date-fns';
import { ko } from 'date-fns/locale';

format(new Date(), 'yyyy-MM-dd', { locale: ko });
```

---

### UI/UX 개선

#### react-hot-toast
```bash
pnpm add react-hot-toast
```
- **용도**: 토스트 알림
- **사용 예시**:
```typescript
import toast from 'react-hot-toast';

toast.success('저장되었습니다!');
toast.error('오류가 발생했습니다.');
```

#### framer-motion
```bash
pnpm add framer-motion
```
- **용도**: 애니메이션
- **사용 예시**:
```typescript
import { motion } from 'framer-motion';

<motion.div
  initial={{ opacity: 0 }}
  animate={{ opacity: 1 }}
  transition={{ duration: 0.3 }}
>
  내용
</motion.div>
```

#### react-icons
```bash
pnpm add react-icons
```
- **용도**: 아이콘
- **사용 예시**:
```typescript
import { FaSave, FaDownload } from 'react-icons/fa';

<FaSave />
<FaDownload />
```

---

### 테스트

#### React Testing Library
```bash
pnpm add -D @testing-library/react @testing-library/jest-dom @testing-library/user-event
```
- **용도**: React 컴포넌트 테스트
- **설정 파일**: `jest.config.js`
- **사용 예시**:
```typescript
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';

test('버튼 클릭 테스트', async () => {
  render(<Button />);
  const button = screen.getByRole('button');
  await userEvent.click(button);
  expect(screen.getByText('클릭됨')).toBeInTheDocument();
});
```

#### Playwright
```bash
pnpm add -D @playwright/test
npx playwright install
```
- **용도**: E2E 테스트
- **설정 파일**: `playwright.config.ts`
- **사용 예시**:
```typescript
import { test, expect } from '@playwright/test';

test('계산 기능 테스트', async ({ page }) => {
  await page.goto('/tools/ad-performance');
  await page.fill('input[name="price"]', '10000');
  await page.click('button:has-text("계산하기")');
  await expect(page.locator('.result')).toBeVisible();
});
```

---

### PDF 생성

#### 옵션 1: jspdf + html2canvas
```bash
pnpm add jspdf html2canvas
pnpm add -D @types/jspdf
```
- **장점**: 유연한 레이아웃
- **단점**: 복잡한 설정
- **사용 예시**:
```typescript
import jsPDF from 'jspdf';
import html2canvas from 'html2canvas';

const element = document.getElementById('report');
const canvas = await html2canvas(element);
const imgData = canvas.toDataURL('image/png');
const pdf = new jsPDF();
pdf.addImage(imgData, 'PNG', 0, 0);
pdf.save('report.pdf');
```

#### 옵션 2: @react-pdf/renderer
```bash
pnpm add @react-pdf/renderer
```
- **장점**: React 컴포넌트 기반, 타입 안정성
- **단점**: 제한적인 스타일링
- **사용 예시**:
```typescript
import { Document, Page, Text, PDFDownloadLink } from '@react-pdf/renderer';

const MyDocument = () => (
  <Document>
    <Page>
      <Text>리포트 내용</Text>
    </Page>
  </Document>
);

<PDFDownloadLink document={<MyDocument />} fileName="report.pdf">
  PDF 다운로드
</PDFDownloadLink>
```

**추천**: `@react-pdf/renderer` (React 기반 프로젝트에 적합)

---

### 다국어 지원

#### 옵션 1: next-intl
```bash
pnpm add next-intl
```
- **장점**: Next.js와 통합, 서버 컴포넌트 지원
- **사용 예시**:
```typescript
import { useTranslations } from 'next-intl';

const t = useTranslations('common');
<h1>{t('title')}</h1>
```

#### 옵션 2: react-i18next
```bash
pnpm add react-i18next i18next
```
- **장점**: 널리 사용됨, 풍부한 기능
- **사용 예시**:
```typescript
import { useTranslation } from 'react-i18next';

const { t } = useTranslation();
<h1>{t('common.title')}</h1>
```

**추천**: `next-intl` (Next.js 15 App Router에 최적화)

---

### Rate Limiting

#### 옵션 1: @upstash/ratelimit
```bash
pnpm add @upstash/ratelimit @upstash/redis
```
- **장점**: 서버리스 환경에 적합, Redis 기반
- **사용 예시**:
```typescript
import { Ratelimit } from '@upstash/ratelimit';
import { Redis } from '@upstash/redis';

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(10, '1 m'),
});

const { success } = await ratelimit.limit(identifier);
```

#### 옵션 2: 직접 구현 (메모리 기반)
- **장점**: 외부 의존성 없음
- **단점**: 서버 재시작 시 초기화, 분산 환경에서 제한적
- **사용 예시**:
```typescript
const rateLimitMap = new Map<string, number[]>();

export const rateLimit = (identifier: string, limit: number, window: number) => {
  const now = Date.now();
  const requests = rateLimitMap.get(identifier) || [];
  const validRequests = requests.filter(time => now - time < window);
  
  if (validRequests.length >= limit) {
    return false;
  }
  
  validRequests.push(now);
  rateLimitMap.set(identifier, validRequests);
  return true;
};
```

**추천**: 프로덕션은 `@upstash/ratelimit`, 개발/테스트는 직접 구현

---

## 설치 스크립트

### Phase 1 필수 라이브러리
```bash
# 데이터 처리
pnpm add papaparse date-fns
pnpm add -D @types/papaparse

# UI/UX
pnpm add react-hot-toast react-icons
```

### Phase 2 추가 라이브러리
```bash
# 테스트
pnpm add -D @testing-library/react @testing-library/jest-dom @testing-library/user-event
pnpm add -D @playwright/test

# PDF
pnpm add @react-pdf/renderer

# 다국어
pnpm add next-intl

# Rate Limiting
pnpm add @upstash/ratelimit @upstash/redis
```

---

## 설정 파일 예시

### Jest 설정 (`jest.config.js`)
```javascript
const nextJest = require('next/jest')

const createJestConfig = nextJest({
  dir: './',
})

const customJestConfig = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testEnvironment: 'jest-environment-jsdom',
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1',
  },
}

module.exports = createJestConfig(customJestConfig)
```

### Playwright 설정 (`playwright.config.ts`)
```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:3000',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
  ],
  webServer: {
    command: 'pnpm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
});
```

---

## 참고 자료

- [PapaParse 공식 문서](https://www.papaparse.com/)
- [date-fns 공식 문서](https://date-fns.org/)
- [React Testing Library 공식 문서](https://testing-library.com/react)
- [Playwright 공식 문서](https://playwright.dev/)
- [React PDF 공식 문서](https://react-pdf.org/)
- [next-intl 공식 문서](https://next-intl-docs.vercel.app/)
- [Upstash Rate Limit 공식 문서](https://upstash.com/docs/redis/sdks/ratelimit)

---

## 라이선스 고려사항

모든 라이브러리는 MIT 또는 Apache 2.0 라이선스를 사용하므로 상업적 사용에 문제없습니다.

---

## 업데이트 이력

- 2025년: 초기 문서 작성

